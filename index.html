<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="referrer" content="no-referrer" />
    <link rel="shortcut icon" type="image/x-icon" href="favicon.ico">
    <link rel="stylesheet" type="text/css" href="css/default.css">
    <title>Grayfen's Canvas</title>
    <meta name="keywords" content="UIè®¾è®¡å¸ˆ/æ’ç”»å¸ˆ">
    <meta name="description" content="Grayfençš„ä¸ªäººç”»å±•">
</head>

<body>
    <div id="mainpart">
        <div class="thetitle">
            <h1 class="title">Grayfen's Canvas</h1>
            <button id="switch"></button>
        </div>
        <div class="slogen">åˆ†äº«ä½œå“å’Œè®¾è®¡</div>
        <div class="zcool">
            <a class="link" href="https://www.zcool.com.cn/u/16736676" target="_blank" name="ç«™é…·ä¸»é¡µ"></a>
        </div>
        <div class="tabs">
            <div class="tab active" data-tab="image-content">ğŸ¨ ä½œå“</div>
            <div class="tab" data-tab="issue-content">ğŸ‘€ éšç¬”</div>
        </div>
        <div id="image-content" class="tab-content active">
            <ul id="works"></ul>
            <div class="loadmorepic">
                <span id="more">æ»šåŠ¨åŠ è½½æ›´å¤š...</span>
                <span id="nums">
                    <span id="loadpic"></span>
                    <span class="and">/</span>
                    <span id="allpic"></span>
                </span>
            </div>
        </div>
        <div id="issue-content" class="tab-content">
            <ul id="issue-list"></ul>
            <span id="more2">æ»šåŠ¨åŠ è½½æ›´å¤š...</span>
        </div>


    </div>
    <!-- The Modal -->
    <div id="myModal" class="modal">
        <span class="close">Ã—</span>
        <img class="modal-content" id="img01" onclick="look(this);">
    </div>
    <footer>
        <div class="links">å‹æƒ…é“¾æ¥ï¼š
            <a href="https://www.leoon.cn/" target="_blank"> Leoon Liang </a>
            <a href="https://kooritea.moe/" target="_blank"> å†°èŒ¶çš„ç³–æœç½ </a>
            <a href="https://www.yuanmoc.cn/" target="_blank"> Yuanmoc </a>
            <a href="https://weitheworld.cn/" target="_blank"> Lusir's Blog </a>
            <a href="https://www.d1n910.com/" target="_blank"
                style="pointer-events:none;color:#939393;text-decoration-line: line-through;"> è›‹ç³•åšå®¢(å·²å¤±æ•ˆ) </a>
        </div>
        <div class="links">ç‰¹åˆ«é¸£è°¢ï¼š
            <a href="https://wangyuan.info/" target="_blank"> ç½‘å›­èµ„è®¯å·¥ä½œå®¤ </a>
        </div>
        <div class="information">Copyright Â© 2019-2024 Grayfen æ¡‚å³°</div>
        <div class="links">
            <a href="http://beian.miit.gov.cn" target="_blank">ç²¤ICPå¤‡19034456å·</a>
        </div>
        <div class="links">
            <a href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=44060502003152" target="_blank">
                <img src="beian.png" />ç²¤å…¬ç½‘å®‰å¤‡ 44060502003152å·
            </a>
        </div>
    </footer>
</body>
<script src="js/imagearray.js"></script>
<script src="js/marked.min.js"></script>
<script>
    // åˆ‡æ¢æ ‡ç­¾é¡µ
    document.querySelectorAll('.tab').forEach(tab => {
        tab.addEventListener('click', () => {
            const targetTab = tab.getAttribute('data-tab');
            console.log("Target Tab:", targetTab); // è°ƒè¯•ä¿¡æ¯

            // ç¡®ä¿ç›®æ ‡å†…å®¹åŒºåŸŸå­˜åœ¨
            const targetContent = document.getElementById(targetTab);
            if (!targetContent) {
                console.error("Target content not found:", targetTab);
                return;
            }

            // ç§»é™¤æ‰€æœ‰æ ‡ç­¾å’Œå†…å®¹çš„activeç±»
            document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
            document.querySelectorAll('.tab-content').forEach(content => content.classList.remove('active'));

            // æ·»åŠ activeç±»åˆ°å½“å‰æ ‡ç­¾å’Œå†…å®¹
            tab.classList.add('active');
            targetContent.classList.add('active');
        });
    });
    const owner = "GrayfenXie";
    const repo = "GrayfenXie.github.io";
    const issueNumber = "2"; // æ›¿æ¢ä¸ºç›®æ ‡Issueçš„ç¼–å·
    let currentPage = 1;
    const perPage = 10; // æ¯é¡µåŠ è½½10æ¡è¯„è®º

    async function loadissues(page) {
        try {
            // æ›¿æ¢ä¸ºä½ çš„GitHubç”¨æˆ·åã€ä»“åº“åç§°å’ŒIssueç¼–å·
            const response = await fetch(`https://api.github.com/repos/${owner}/${repo}/issues/${issueNumber}/comments?per_page=${perPage}`);
            if (!response.ok) {
                throw new Error(`Failed to fetch issues: ${response.statusText}`);
            }
            const issues = await response.json();
            const issueList = document.getElementById('issue-list');

            // éå†è¯„è®ºæ•°ç»„ï¼ŒåŠ¨æ€ç”ŸæˆHTMLå†…å®¹
            issues.forEach(issue => {
                const li = document.createElement('li');
                const date = new Date(issue.created_at); // è§£ææ—¶é—´æˆ³
                const formattedDate = `${date.toLocaleDateString()} ${date.toLocaleTimeString()}`; // æ ¼å¼åŒ–æ—¥æœŸå’Œæ—¶é—´
                // ä½¿ç”¨marked.jså°†Markdownè½¬æ¢ä¸ºHTML
                const bodyHTML = marked(issue.body);
                li.innerHTML = `
                        <div class="issue-body">${bodyHTML}</div>
                        <div class="issue-date">${formattedDate}</div>
                    `;
                issueList.appendChild(li);
            }); 
            if (issues.length < perPage) {
                    document.getElementById('more2').style.display = 'none';
                }
        }
       
         catch (error) {
            console.error('Failed to load issues:', error);
            document.getElementById('issue-list').innerHTML = '<li>åŠ è½½è¯„è®ºå¤±è´¥ï¼Œè¯·ç¨åå†è¯•ã€‚</li>';
        }
    }

    // è°ƒç”¨å‡½æ•°åŠ è½½è¯„è®º
    loadissues(currentPage);
    // æ·»åŠ â€œåŠ è½½æ›´å¤šâ€æŒ‰é’®çš„äº‹ä»¶ç›‘å¬
    document.getElementById('more2').addEventListener('click', () => {
        currentPage++;
        loadissues(currentPage);
    });
</script>

</html>